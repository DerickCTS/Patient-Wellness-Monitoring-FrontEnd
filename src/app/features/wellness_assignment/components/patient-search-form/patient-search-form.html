<mat-card class="search-card">
    <div mat-card-title>Patient Search</div>
    <div class="search-tabs">
      <button mat-button [class.active]="searchType === 'name'" (click)="searchType = 'name'">Search by Name</button>
      <button mat-button [class.active]="searchType === 'id'" (click)="searchType = 'id'">Search by Patient ID</button>
    </div>
    
    <form (ngSubmit)="searchPatient()">
      <mat-form-field appearance="outline" class="full-width-input">
        <mat-label>{{ searchType === 'name' ? 'Patient Name' : 'Patient ID' }}</mat-label>
        <input matInput type="text" [(ngModel)]="searchQuery" name="searchQuery" required>
      </mat-form-field>
      <button mat-flat-button color="primary" type="submit" [disabled]="!searchQuery || isLoading">
        <mat-icon>search</mat-icon> Search
      </button>
    </form>

    <mat-progress-bar *ngIf="isLoading" mode="indeterminate"></mat-progress-bar>
</mat-card>

<div *ngIf="searchResults.length > 0" class="search-results-list">
    <h3>Search Results ({{ searchResults.length }})</h3>
    <app-patient-summary-card 
      *ngFor="let patient of searchResults" 
      [patient]="patient"
      (click)="selectPatient(patient.patientId)">
    </app-patient-summary-card>
</div>
<div *ngIf="!isLoading && searchQuery && searchResults.length === 0" class="no-results-message">
    No patients found matching your search.
</div>